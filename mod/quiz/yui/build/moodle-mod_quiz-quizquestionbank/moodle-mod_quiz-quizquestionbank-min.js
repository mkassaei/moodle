YUI.add("moodle-mod_quiz-quizquestionbank",function(e,t){var n={QBANKFORM:"div.questionbankformforpopup",QBANKLINK:"a.questionbank",QBANK:".questionbank"},r={PAGE:"addonpage",HEADER:"header"},i=function(){i.superclass.constructor.apply(this,arguments)};e.extend(i,e.Base,{qbank:e.one(n.QBANK),dialogue:null,create_dialogue:function(){config={headerContent:this.qbank._node.getAttribute(r.HEADER),bodyContent:e.one(n.QBANKFORM),draggable:!0,modal:!0,zIndex:1e3,context:[n.QBANK,"tr","br",["beforeShow"]],centered:!0,width:null,visible:!1,postmethod:"form",footerContent:null,extraClasses:["mod_quiz_qbank_dialogue"]},this.dialogue=new M.core.dialogue(config),this.dialogue.hide()},initializer:function(){this.create_dialogue(),e.all(n.QBANKLINK).each(function(e){var t=e.getData(r.PAGE);e.on("click",this.display_dialog,this,t)},this)},display_dialog:function(e,t){e.preventDefault(),this.dialogue.show(),this.load_content(window.location.search)},load_content:function(t){e.io(M.cfg.wwwroot+"/mod/quiz/questionbank.ajax.php"+t,{method:"GET",on:{success:this.load_done,failure:this.load_failed},context:this})},load_done:function(e,t){var n=JSON.parse(t.responseText);if(!n.status||n.status!=="OK"){this.load_failed(e,t);return}this.dialogue.bodyNode.setHTML(n.contents),this.dialogue.centerDialogue(),this.dialogue.bodyNode.delegate("click",this.link_clicked,"a[href]",this)},load_failed:function(){},link_clicked:function(e){e.preventDefault(),this.load_content(e.currentTarget.get("search"))}}),M.mod_quiz=M.mod_quiz||{},M.mod_quiz.quizquestionbank=M.mod_quiz.quizquestionbank||{},M.mod_quiz.quizquestionbank.init=function(){return new i}},"@VERSION@",{requires:["base","event","node","io"]});
